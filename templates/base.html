{% load static compress wagtailuserbar fullurl %}
{% comment %}
NOTE: This site uses RDFa and schema.org vocabulary.  Every page will be declared as schema:Webpage
by default; use page_rdf_type to override with a webpage subclass.
{% endcomment %}
<!DOCTYPE html>
<html lang="en" xmlns:schema="http://schema.org/" xmlns:og="http://ogp.me/ns#">
<head>
    <!-- metadata -->
    {# html metadata #}
    <title>
        {% block page-title %}
        {% block page-subtitle %}{{ page.meta_title }}{% endblock %}
        Princeton Prosody Archive
        {% endblock %}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'apple-touch-icon.png' %}" />
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon-32x32.png' %}" />
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicon-16x16.png' %}" />
    <link rel="manifest" href="{% static 'manifest.json' %}" />
    <link rel="mask-icon" href="{% static 'safari-pinned-tab.svg' %}" color="#E9E9E9" />
    <meta name="theme-color" content="#E9E9E9" />
    <meta name="keywords" content="{% block meta_keywords %}{% endblock %}">
    <meta name="description" content="{% block meta_description %}{% endblock %}">
    {% firstof page_meta_image 'mstile-150x150.png' as preview_image %}
    {# open graph metadata #}
    <meta property="og:title" content="{{ page.meta_title }}" />
    <meta property="og:type" content="website" />
    {# <meta property="og:description" content="{% block meta_description %}{% endblock %}"/> #}
    <meta property="og:site_name" content="Princeton Prosody Archive"/>
    {# twitter card #}
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="{% block meta_title %}{% endblock %}"/>
    {# <meta name="twitter:description" content="{% block meta_description %}{% endblock %}" /> #}
    {% if request %}
    <meta property="og:image" content="{% fullstatic preview_image %}" />
    <meta name="twitter:image" content="{% fullstatic preview_image %}" />
    <meta property="og:url" content="{{ request.build_absolute_uri }}" />
    <meta name="twitter:url" content="{{ request.build_absolute_uri }}" />
    <meta name="twitter:domain" content="{{ request.get_host }}" />
    {% endif %}
    {% block metadata %}{% endblock %}

    <!-- styles -->
    <link rel="stylesheet" type="text/css" href="{% static 'semantic/dist/semantic.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/test-banner.css' %}">
    {% compress css %}
        <link rel="stylesheet" type="text/x-scss" href="{% static 'scss/ppa.scss' %}">
    {% endcompress %}
    {% block css %}{% endblock %} {# add any additional css here #}

    <!-- scripts -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous">
    </script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.4.2/lottie_light.min.js"
        integrity="sha256-9W89GVg8IxmHBVQSCtQx0Sxkk2lQdScemvga5wLSEcQ="
        crossorigin="anonymous">
    </script>
    <script src="{% static 'semantic/dist/semantic.min.js' %}"></script>
    {% if not request.is_preview and GTAGS_ANALYTICS_ID %}
        {% include 'snippets/analytics.html' %}
    {% endif %}
    {% compress js %}
        <script src="{% static 'js/index.js' %}" type="module"></script>
        {% block js %}{% endblock %} {# add any additional javascript here #}
    {% endcompress %}

    <!-- extra metadata -->
    {% block head_extras %}{% endblock %}
</head>
<body>
    {% include 'snippets/test_banner.html' %}
    {% block page_nav %}
        {% include 'snippets/nav.html' %}
    {% endblock %}
    <div class="pusher"> {# moves page content when mobile menu is clicked #}
        {% block page_header %}
        {% endblock %}
        <main id="{% block page-context-id %}{% endblock %}">
            {% block content %}{% endblock %}
        </main>

        {% block page_footer %}
            {% include 'snippets/footer.html' %}
        {% endblock %}

    </div>
    {% block page-js %}{% endblock %}

    {# enable wagtail quick menu for logged in content editors #}
    {% wagtailuserbar %}
</body>
</html>
